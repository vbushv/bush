<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="CustomerManager_sqlMap" >

<select id="getCustomerList" parameterType="hashMap" resultType="vo.CustomerManagerVO">
	SELECT T.* FROM(
		SELECT A.*, ROWNUM AS rnum FROM(
			SELECT *
			FROM customer_manager
			WHERE 1 = 1
				<if test="cu_name != null">
				 AND cu_name like '%' || #{cu_name} || '%'
				</if>
				<if test="cu_company != null">
				 AND cu_company like '%' || #{cu_company} || '%'
				</if>
			ORDER BY cu_reg_date desc
		) A
	) T
	WHERE rnum BETWEEN #{startNum} and #{endNum}
</select>

<select id="getCustomerView" parameterType="java.lang.String" resultType="vo.CustomerManagerVO">
	SELECT *
	FROM customer_manager
	WHERE cu_id = #{cu_id}
</select>

<select id="getCustomerCompanyList" resultType="vo.CustomerManagerVO">
	SELECT cu_company
	FROM customer_manager
</select>

<select id="getCustomerTotalCount" resultType="java.lang.Integer">
	SELECT COUNT(*)
	FROM customer_manager
</select>

<insert id="addCustomer" parameterType="vo.CustomerManagerVO">
	INSERT INTO
	customer_manager(cu_id, cu_name, cu_company, cu_position, cu_department, cu_ps_call, cu_co_call, cu_email, cu_etc, cu_reg_date)
	VALUES(#{cu_id}, #{cu_name}, #{cu_company}, #{cu_position}, #{cu_department}, #{cu_ps_call}, #{cu_co_call}, #{cu_email}, #{cu_etc}, sysdate)
</insert>

<delete id="deleteCustomer" parameterType="java.lang.String">
	DELETE
	FROM customer_manager
	WHERE cu_id = #{cu_id}
</delete>

<update id="updateCustomer" parameterType="vo.CustomerManagerVO">
	UPDATE customer_manager
	SET cu_name = #{cu_name}, cu_company = #{cu_company}, cu_position = #{cu_position}, cu_department = #{cu_department}, cu_ps_call = #{cu_ps_call}, cu_co_call = #{cu_co_call}, cu_email = #{cu_email}, cu_etc = #{cu_etc}, cu_reg_date = sysdate 
	WHERE cu_id = #{cu_id}
</update>

<!-- resultType="java.lang.Integer" -->

</mapper>